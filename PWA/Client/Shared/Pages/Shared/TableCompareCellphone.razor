@using Bell.Reconciliation.Common.Models
@using Bell.Reconciliation.Frontend.Shared.ServiceInterfaces;
@inject ISyncData SyncData
@inject ILocalDbRepository Localdb

CELLPHONE
<RadzenTabs  RenderMode="Radzen.TabRenderMode.Client" @bind-SelectedIndex=@selectedIndex>
    <Tabs>
        <RadzenTabsItem Text="Only in Staples">
            <RadzenDataGrid AllowVirtualization="true" ColumnWidth="150px" AllowFiltering="true" AllowPaging="true" PageSize="8" AllowSorting="true" Data="@staplesSources" TItem="StaplesSourceDto">
                <Columns>
                    <RadzenDataGridColumn TItem="StaplesSourceDto" Property="OrderNumber" Title="OrderNumber" />
                    <RadzenDataGridColumn TItem="StaplesSourceDto" Property="Phone" Title="Phone" />
                    <RadzenDataGridColumn  Property="IMEI" Title="IMEI" />
                    <RadzenDataGridColumn TItem="StaplesSourceDto" Property="Amount" Title="Amount" />
                    <RadzenDataGridColumn TItem="StaplesSourceDto" Property="Comment" Title="Comment" />
                    <RadzenDataGridColumn TItem="StaplesSourceDto" Property="TransactionDate" Title="TransactionDate" />
                    <RadzenDataGridColumn TItem="StaplesSourceDto" Property="CustomerName" Title="CustomerName" />
                </Columns>
            </RadzenDataGrid>
        </RadzenTabsItem>
        <RadzenTabsItem Text="In both">
            <RadzenDataGrid ColumnWidth="150px" AllowFiltering="true" AllowPaging="true" PageSize="8" AllowSorting="true" Data="@compareBellStaple" TItem="CompareBellStaple">
                <Columns>
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="MatchStatus" Title="Consolidate" />

                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="SPhone" Title="S.Phone" />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="SIMEI" Title="S.IMEI" />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="SOrderNumber" Title="S.Order" />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="SAmount" Title="S.Amount " />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="SComment" Title="S.Comment " />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="STransactionDate" Title="S.TransactionDate " />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="SCustomerName" Title="S.CustomerName " />

                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BPhone" Title="B.Phone" />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BIMEI" Title="B.IMEI" />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BOrderNumber" Title="B.Order" />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BAmount" Title="B.Amount " />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BComment" Title="B.Comment " />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BTransactionDate" Title="B.TransactionDate " />
                    <RadzenDataGridColumn TItem="CompareBellStaple" Property="BCustomerName" Title="B.CustomerName " />
                </Columns>
            </RadzenDataGrid>
        </RadzenTabsItem>
        <RadzenTabsItem Text="Only in Bell">
            <RadzenDataGrid AllowVirtualization="true"  ColumnWidth="150px" AllowFiltering="true" AllowPaging="true" PageSize="8" AllowSorting="true"
                            Data="@bellSources" @ref="grid" TItem="BellSourceDto">
                <Columns>
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="OrderNumber" Title="OrderNumber" />
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="Phone" Title="Phone" />
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="IMEI" Title="IMEI" />
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="Amount" Title="Amount" />
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="Comment" Title="Comment" />
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="TransactionDate" Title="TransactionDate" />
                    <RadzenDataGridColumn TItem="BellSourceDto" Property="CustomerName" Title="CustomerName" />
                </Columns>
            </RadzenDataGrid>
        </RadzenTabsItem>
    </Tabs>

</RadzenTabs>

<hr class="featurette-divider">

@code {
    int selectedIndex = 0;
    [Parameter]
    public List<BellSourceDto> bellSources { get; set; }
    [Parameter]
    public List<StaplesSourceDto> staplesSources { get; set; }
    List<CompareBellStaple> compareBellStaple = new();
    RadzenDataGrid<BellSourceDto> grid = new RadzenDataGrid<BellSourceDto>();

    private bool busy;




    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();



        compareBellStaple.AddRange(new List<CompareBellStaple>
        {
            
        });
        StateHasChanged();

    }

    //private async Task FetchData()
    //{
    //    await SyncData.FetchDataFromServerDb();
    //}

    //private async Task LoadFromLocalDB()
    //{
    //    bellSources = await Localdb.GetBellSourceFromLocalDb();
    //    staplesSources = await Localdb.GetStapleSourceFromLocalDb(); 
    //}

    

}
